h1. dl-node

h2. Installation

1. Install "Node":http://nodejs.org/

2. Install npm - @curl http://npmjs.org/install.sh | sh@

3. Install "Redis":http://redis.io

@npm install@ will download dependencies for the project

@redis-server@ will start a Redis server listening by default on port 6379

@node app.js@ will start the Node server on port 3000

h2. How it works

The Rails backend responds to a vote request by pinging the Redis server listening on the node app.

The Node app listens on a Websocket using "socket.io":http://socket.io, and subscribes to changes to this Redis channel.

Redis receives the following vote object as JSON:

<pre><code>
      {
        "session_id" => "8060a29e2",
        "vote" => {
        "user" => {
          "id" => "@outsnyder","name" => "David Snyder"
        },
        "option" => {
          "id" => "10abd3d-factual-id","name" => "Subway"
        }
      }
</code></pre>

And the updated JSON session object is broadcast to all connected clients with the same @session_id@:

<pre><code>
{
  "session_id":"8060a29e2",
  "total_votes":1,
  "options": {
    '10abd3d-factual-id':{'id':'10abd3d-factual-id','name':'Subway','votes': [{'name':'David Snyder','id':'@outsnyder'}]}
  }
}
</code></pre>
